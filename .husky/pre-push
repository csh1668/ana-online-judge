echo "ğŸš€ Running pre-push checks..."

# Judge: cargo check
if [ -d "judge" ]; then
  echo "ğŸ“¦ Checking Rust code in judge..."
  
  cd judge
  
  echo "  âœ… Running cargo check..."
  if ! cargo check; then
    echo "âŒ cargo check failed in judge/"
    exit 1
  fi
  
  cd ..
fi

# Web: pnpm build
if [ -d "web" ]; then
  echo "ğŸŒ Building TypeScript code in web..."
  
  cd web
  
  echo "  ğŸ—ï¸  Running pnpm build..."
  if ! pnpm build; then
    echo "âŒ pnpm build failed in web/"
    exit 1
  fi
  
  cd ..
fi

echo "âœ¨ Pre-push checks passed!"

